<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Equipo Actual ‚öΩ</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <h1>‚ö° Tu Equipo Actual</h1>

  {% if team %}
  <!-- Secci√≥n de formaci√≥n organizada por posiciones -->
  <div id="formation-container">
    {% set positions = ['Portero', 'Defensa', 'Centrocampista', 'Delantero'] %}
    {% for pos in positions %}
      {% set players_by_pos = team | selectattr("posici√≥n", "equalto", pos) | list %}
      {% if players_by_pos %}
        <div class="position-row">
          <h3>{{ pos }}{% if players_by_pos|length > 1 %}s{% endif %}</h3>
          <div class="position-cards">
            {% for player in players_by_pos %}
              <div class="team-card">
                <img src="{{ player.foto }}" alt="{{ player.nombre }}">
                <h3>{{ player.nombre }}</h3>
                <p>{{ player.posici√≥n }}</p>
                <a class="btn btn-remove" href="{{ url_for('remove_from_team', nombre=player.nombre) }}">‚ùå Quitar</a>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <!-- Estad√≠sticas del equipo -->
  <div style="margin-top: 20px;">
    <p><strong>üìä Promedios del equipo:</strong></p>
    <p>Ataque: {{ avg.ataque }} | Defensa: {{ avg.defensa }} | T√©cnica: {{ avg.tecnica }} | Resistencia: {{ avg.resistencia }}</p>
  </div>

  <!-- Bot√≥n para ver formaci√≥n -->
  {% if team|length == 11 %}
    <a class="btn" href="{{ url_for('formation_view') }}">‚öΩ Ver Formaci√≥n</a>
  {% else %}
    <p style="margin-top: 20px;">‚ÑπÔ∏è Tienes {{ team|length }}/11 jugadores.</p>
  {% endif %}

  <a class="btn" href="{{ url_for('index') }}">üë• Explorar M√°s</a>

  {% else %}
    <p>No hay jugadores en el equipo a√∫n.</p>
    <a class="btn" href="{{ url_for('index') }}">üë• A√±adir Jugadores</a>
  {% endif %}

</body>
</html>
